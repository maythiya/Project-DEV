{% extends 'base.html' %}
{% block title %}ลบบัญชี · UBU Library{% endblock %}

{% block content %}
<div class="max-w-lg mx-auto bg-white rounded-2xl shadow p-6">
  <h2 class="text-2xl font-bold mb-3 text-red-600">ลบบัญชี</h2>
  <p class="text-sm text-slate-600 mb-4">
    การลบบัญชีเป็นการกระทำถาวร ข้อมูลที่เกี่ยวข้องอาจถูกลบตามนโยบายฐานข้อมูลของระบบ
  </p>

  <ul class="text-sm text-slate-700 bg-amber-50 border border-amber-200 rounded-lg p-3 mb-4">
    <li>• ต้องยืนยันรหัสผ่านของคุณ</li>
    <li>• หากยังมีรายการยืมค้างอยู่ จะไม่สามารถลบบัญชีได้</li>
    <li>• พิมพ์คำว่า <span class="font-semibold">DELETE</span> เพื่อยืนยัน</li>
  </ul>

  {% if open_loans_count and open_loans_count > 0 %}
    <div class="text-sm text-red-600 mb-3">
      คุณมีรายการยืมค้างอยู่ {{ open_loans_count }} รายการ กรุณาคืนให้ครบก่อน
    </div>
  {% endif %}

  <form method="post" class="space-y-4">
    {% csrf_token %}
    <div>
      <label class="block text-sm font-medium mb-1">รหัสผ่าน</label>
      <input type="password" name="password" required
             class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
    </div>
    <div>
      <label class="block text-sm font-medium mb-1">พิมพ์คำว่า DELETE เพื่อยืนยัน</label>
      <input type="text" name="confirm" placeholder="DELETE" required
             class="w-full p-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-400">
    </div>

    <div class="flex items-center gap-3 pt-2">
      <a href="{% url 'book_list' %}" class="px-4 py-2 rounded-lg bg-slate-100 hover:bg-slate-200">ยกเลิก</a>
      <button class="ml-auto px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700">
        ลบบัญชีถาวร
      </button>
    </div>
  </form>
</div>
{% endblock %}
